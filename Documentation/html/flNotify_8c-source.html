<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>funcLib: flNotify.c Source File</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
<link href="tabs.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.5.1 -->
<div class="tabs">
  <ul>
    <li><a href="main.html"><span>Main&nbsp;Page</span></a></li>
    <li><a href="annotated.html"><span>Classes</span></a></li>
    <li id="current"><a href="files.html"><span>Files</span></a></li>
  </ul></div>
<div class="tabs">
  <ul>
    <li><a href="files.html"><span>File&nbsp;List</span></a></li>
    <li><a href="globals.html"><span>File&nbsp;Members</span></a></li>
  </ul></div>
<h1>flNotify.c</h1><a href="flNotify_8c.html">Go to the documentation of this file.</a><div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 <span class="preprocessor">#include "<a class="code" href="flGlobal_8h.html">flGlobal.h</a>"</span>
<a name="l00002"></a>00002 <span class="preprocessor">#if FL_NOTIFY != 0</span>
<a name="l00003"></a>00003 <span class="preprocessor"></span><span class="preprocessor">#include &lt;stdio.h&gt;</span>
<a name="l00004"></a>00004 <span class="preprocessor">#include &lt;psprtc.h&gt;</span>
<a name="l00005"></a>00005 <span class="preprocessor">#include &lt;pspkernel.h&gt;</span>
<a name="l00006"></a>00006 <span class="preprocessor">#include &lt;psppower.h&gt;</span>
<a name="l00007"></a>00007 <span class="preprocessor">#include &lt;pspimpose_driver.h&gt;</span>
<a name="l00008"></a>00008 
<a name="l00009"></a>00009 <span class="preprocessor">#if FL_INCLUDE_ALL_C == 0</span>
<a name="l00010"></a>00010 <span class="preprocessor"></span><span class="preprocessor">#include "<a class="code" href="flNotify_8h.html">flNotify.h</a>"</span>
<a name="l00011"></a>00011 <span class="preprocessor">#include "<a class="code" href="flMemory_8h.html">flMemory.h</a>"</span>
<a name="l00012"></a>00012 <span class="preprocessor">#include "<a class="code" href="flTimer_8h.html">flTimer.h</a>"</span>
<a name="l00013"></a>00013 <span class="preprocessor">#include "<a class="code" href="flDebug_8h.html">flDebug.h</a>"</span>
<a name="l00014"></a>00014 <span class="preprocessor">#include "<a class="code" href="flGraphics_8h.html">flGraphics.h</a>"</span>
<a name="l00015"></a>00015 <span class="preprocessor">#include "<a class="code" href="flGraphics2d_8h.html">flGraphics2d.h</a>"</span>
<a name="l00016"></a>00016 <span class="preprocessor">#include "<a class="code" href="flFont_8h.html">flFont.h</a>"</span>
<a name="l00017"></a>00017 <span class="preprocessor">#endif</span>
<a name="l00018"></a>00018 <span class="preprocessor"></span>
<a name="l00019"></a>00019 <span class="preprocessor">#if FL_KERNELMODE</span>
<a name="l00020"></a>00020 <span class="preprocessor"></span><span class="keywordtype">int</span>     ntfyVolLast = -1;
<a name="l00021"></a>00021 <span class="keywordtype">int</span>     ntfyVolMuteLast = -1;
<a name="l00022"></a>00022 <span class="keywordtype">float</span>   ntfyVolTime = 0.0f;
<a name="l00023"></a>00023 <a class="code" href="structTimer.html">Timer</a>*  ntfyVolTimer = <a class="code" href="flTypes_8h.html#070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;
<a name="l00024"></a>00024 <span class="preprocessor">#endif</span>
<a name="l00025"></a>00025 <span class="preprocessor"></span>
<a name="l00026"></a><a class="code" href="flNotify_8c.html#b0c871dc5759f171078a7e8e7786f2a3">00026</a> <span class="keywordtype">int</span>     <a class="code" href="flNotify_8c.html#b0c871dc5759f171078a7e8e7786f2a3">ntfyBattChrgLast</a> = -1;
<a name="l00027"></a><a class="code" href="flNotify_8c.html#532036aa016bdf7f32aabcd3e93c82e0">00027</a> <span class="keywordtype">int</span>     <a class="code" href="flNotify_8c.html#532036aa016bdf7f32aabcd3e93c82e0">ntfyBattPercentLast</a> = -1;
<a name="l00028"></a><a class="code" href="flNotify_8c.html#7e58df18b4f2d12477fc796b4a81a863">00028</a> <span class="keywordtype">int</span>     <a class="code" href="flNotify_8c.html#7e58df18b4f2d12477fc796b4a81a863">ntfyBattLowLast</a> = -1;
<a name="l00029"></a><a class="code" href="flNotify_8c.html#03a203ba3c5858fc12ae1f76f74f944e">00029</a> <span class="keywordtype">float</span>   <a class="code" href="flNotify_8c.html#03a203ba3c5858fc12ae1f76f74f944e">ntfyBattTime</a> = 0.0f;
<a name="l00030"></a><a class="code" href="flNotify_8c.html#e5c54dd51d7b68d54e0087651022ced5">00030</a> <a class="code" href="structTimer.html">Timer</a>*  <a class="code" href="flNotify_8c.html#e5c54dd51d7b68d54e0087651022ced5">ntfyBattTimer</a> = <a class="code" href="flTypes_8h.html#070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;
<a name="l00031"></a>00031 
<a name="l00032"></a><a class="code" href="flNotify_8c.html#bcf0c3d5dc92f30cc21b7de43bf73d57">00032</a> pspTime <a class="code" href="flNotify_8c.html#bcf0c3d5dc92f30cc21b7de43bf73d57">ntfyTimeLast</a>;
<a name="l00033"></a><a class="code" href="flNotify_8c.html#6ba80c402400303f97ee31f55512a7fd">00033</a> <span class="keywordtype">float</span>   <a class="code" href="flNotify_8c.html#6ba80c402400303f97ee31f55512a7fd">ntfyTimeTime</a> = 0.0f;
<a name="l00034"></a><a class="code" href="flNotify_8c.html#4de40991164a87ce80583f843c5ff083">00034</a> <a class="code" href="structTimer.html">Timer</a>*  <a class="code" href="flNotify_8c.html#4de40991164a87ce80583f843c5ff083">ntfyTimeTimer</a> = <a class="code" href="flTypes_8h.html#070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;
<a name="l00035"></a>00035 
<a name="l00036"></a>00036 <span class="preprocessor">#if FL_NOTIFY_TRAYSIZE</span>
<a name="l00037"></a><a class="code" href="flNotify_8c.html#456b0084ad987c08d2efbe9342b1dd27">00037</a> <span class="preprocessor"></span><a class="code" href="structNotifyTrayItem.html">NotifyTrayItem</a> <a class="code" href="flNotify_8c.html#456b0084ad987c08d2efbe9342b1dd27">ntfyTray</a>[<a class="code" href="flConfig_8h.html#ff38ea39f307df3514a6f05cf998ebee">FL_NOTIFY_TRAYSIZE</a>];
<a name="l00038"></a><a class="code" href="flNotify_8c.html#6b3b93c9625bce65cd1d21fb55836de8">00038</a> <a class="code" href="structTimer.html">Timer</a>*         <a class="code" href="flNotify_8c.html#6b3b93c9625bce65cd1d21fb55836de8">ntfyTrayTimer</a> = <a class="code" href="flTypes_8h.html#070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;
<a name="l00039"></a>00039 <span class="preprocessor">#endif</span>
<a name="l00040"></a>00040 <span class="preprocessor"></span>
<a name="l00041"></a><a class="code" href="flNotify_8c.html#8a001c468ca918da05d444cbbc82c21b">00041</a> u32    <a class="code" href="flNotify_8c.html#8a001c468ca918da05d444cbbc82c21b">ntfyTickCount</a> = 0;
<a name="l00042"></a><a class="code" href="flNotify_8c.html#6d3ba2e4609062a98bc1ecdd3dd82afd">00042</a> <span class="keywordtype">bool</span>   <a class="code" href="flNotify_8c.html#6d3ba2e4609062a98bc1ecdd3dd82afd">ntfyInitialized</a> = <span class="keyword">false</span>;
<a name="l00043"></a><a class="code" href="flNotify_8c.html#2cdc8553a78172b2afcd7d87828d90dd">00043</a> <span class="keywordtype">bool</span>   <a class="code" href="flNotify_8c.html#2cdc8553a78172b2afcd7d87828d90dd">ntfyVisible</a> = <span class="keyword">true</span>;
<a name="l00044"></a>00044 
<a name="l00045"></a>00045 
<a name="l00046"></a><a class="code" href="flNotify_8h.html#7c77f61ed638b2fc959277c5cf301a0a">00046</a> <span class="keywordtype">void</span> <a class="code" href="flNotify_8c.html#7c77f61ed638b2fc959277c5cf301a0a">ntfyInit</a>() {
<a name="l00047"></a>00047      sceRtcGetCurrentClockLocalTime(&amp;<a class="code" href="flNotify_8c.html#bcf0c3d5dc92f30cc21b7de43bf73d57">ntfyTimeLast</a>);
<a name="l00048"></a>00048 
<a name="l00049"></a>00049 <span class="preprocessor">     #if FL_NOTIFY_TRAYSIZE</span>
<a name="l00050"></a>00050 <span class="preprocessor"></span>     u32 i;
<a name="l00051"></a>00051      <span class="keywordflow">for</span>(i = 0; i &lt; <a class="code" href="flConfig_8h.html#ff38ea39f307df3514a6f05cf998ebee">FL_NOTIFY_TRAYSIZE</a>; i++)
<a name="l00052"></a>00052           <a class="code" href="flNotify_8c.html#456b0084ad987c08d2efbe9342b1dd27">ntfyTray</a>[i].ntiTime = 0.0f;
<a name="l00053"></a>00053      <a class="code" href="flNotify_8c.html#6b3b93c9625bce65cd1d21fb55836de8">ntfyTrayTimer</a> = <a class="code" href="flTimer_8c.html#4081033c0b3db3af0897edf915431b73">timerCreate</a>();
<a name="l00054"></a>00054 <span class="preprocessor">     #endif</span>
<a name="l00055"></a>00055 <span class="preprocessor"></span>
<a name="l00056"></a>00056 <span class="preprocessor">     #if FL_KERNELMODE</span>
<a name="l00057"></a>00057 <span class="preprocessor"></span>     ntfyVolTimer = <a class="code" href="flTimer_8c.html#4081033c0b3db3af0897edf915431b73">timerCreate</a>();
<a name="l00058"></a>00058 <span class="preprocessor">     #endif</span>
<a name="l00059"></a>00059 <span class="preprocessor"></span>     
<a name="l00060"></a>00060      <a class="code" href="flNotify_8c.html#e5c54dd51d7b68d54e0087651022ced5">ntfyBattTimer</a> = <a class="code" href="flTimer_8c.html#4081033c0b3db3af0897edf915431b73">timerCreate</a>();
<a name="l00061"></a>00061      
<a name="l00062"></a>00062      <a class="code" href="flNotify_8c.html#4de40991164a87ce80583f843c5ff083">ntfyTimeTimer</a> = <a class="code" href="flTimer_8c.html#4081033c0b3db3af0897edf915431b73">timerCreate</a>();
<a name="l00063"></a>00063      
<a name="l00064"></a>00064      <a class="code" href="flNotify_8c.html#6d3ba2e4609062a98bc1ecdd3dd82afd">ntfyInitialized</a> = <span class="keyword">true</span>;
<a name="l00065"></a>00065 }
<a name="l00066"></a>00066 
<a name="l00067"></a><a class="code" href="flNotify_8h.html#7aeb64804d2b67f5d68a9e737a8c929b">00067</a> <span class="keywordtype">void</span> <a class="code" href="flNotify_8c.html#7aeb64804d2b67f5d68a9e737a8c929b">ntfyTick</a>() {
<a name="l00068"></a>00068      <span class="keywordflow">if</span>(!<a class="code" href="flNotify_8c.html#6d3ba2e4609062a98bc1ecdd3dd82afd">ntfyInitialized</a>)
<a name="l00069"></a>00069           <span class="keywordflow">return</span>;
<a name="l00070"></a>00070      
<a name="l00071"></a>00071      <a class="code" href="flNotify_8c.html#8a001c468ca918da05d444cbbc82c21b">ntfyTickCount</a>++;
<a name="l00072"></a>00072      <span class="keywordflow">if</span>(<a class="code" href="flNotify_8c.html#8a001c468ca918da05d444cbbc82c21b">ntfyTickCount</a> &gt; <a class="code" href="flConfig_8h.html#4b0e951e99f362f3468f29ed54663877">FL_NOTIFY_FREQUENCY</a>) {
<a name="l00073"></a>00073           <span class="keywordtype">float</span> tempTick;                 
<a name="l00074"></a>00074      
<a name="l00075"></a>00075 <span class="preprocessor">          #if FL_KERNELMODE</span>
<a name="l00076"></a>00076 <span class="preprocessor"></span>          tempTick = <a class="code" href="flTimer_8c.html#154b34b0d32a2c77e90dc904a634fd59">timerGetDeltaTime</a>(ntfyVolTimer);
<a name="l00077"></a>00077           <span class="keywordflow">if</span>(ntfyVolTime &gt; 0.0f) {
<a name="l00078"></a>00078                ntfyVolTime -= tempTick;
<a name="l00079"></a>00079                <span class="keywordflow">if</span>(ntfyVolTime &lt; 0.0f)
<a name="l00080"></a>00080                     ntfyVolTime = 0.0f;
<a name="l00081"></a>00081           }
<a name="l00082"></a>00082 <span class="preprocessor">          #if FL_NOTIFY_VOLUME</span>
<a name="l00083"></a>00083 <span class="preprocessor"></span>          ntfyCheckVolume();
<a name="l00084"></a>00084 <span class="preprocessor">          #endif</span>
<a name="l00085"></a>00085 <span class="preprocessor"></span><span class="preprocessor">          #endif</span>
<a name="l00086"></a>00086 <span class="preprocessor"></span>
<a name="l00087"></a>00087           tempTick = <a class="code" href="flTimer_8c.html#154b34b0d32a2c77e90dc904a634fd59">timerGetDeltaTime</a>(<a class="code" href="flNotify_8c.html#e5c54dd51d7b68d54e0087651022ced5">ntfyBattTimer</a>);
<a name="l00088"></a>00088           <span class="keywordflow">if</span>(<a class="code" href="flNotify_8c.html#03a203ba3c5858fc12ae1f76f74f944e">ntfyBattTime</a> &gt; 0.0f) {
<a name="l00089"></a>00089                <a class="code" href="flNotify_8c.html#03a203ba3c5858fc12ae1f76f74f944e">ntfyBattTime</a> -= tempTick;
<a name="l00090"></a>00090                <span class="keywordflow">if</span>(<a class="code" href="flNotify_8c.html#03a203ba3c5858fc12ae1f76f74f944e">ntfyBattTime</a> &lt; 0.0f)
<a name="l00091"></a>00091                     <a class="code" href="flNotify_8c.html#03a203ba3c5858fc12ae1f76f74f944e">ntfyBattTime</a> = 0.0f;
<a name="l00092"></a>00092           }
<a name="l00093"></a>00093 <span class="preprocessor">          #if FL_NOTIFY_BATTERY</span>
<a name="l00094"></a>00094 <span class="preprocessor"></span>          <a class="code" href="flNotify_8c.html#600e4ac54e9fb4dee440b5264b9e1df3">ntfyCheckBattery</a>();
<a name="l00095"></a>00095 <span class="preprocessor">          #endif</span>
<a name="l00096"></a>00096 <span class="preprocessor"></span>          
<a name="l00097"></a>00097           tempTick = <a class="code" href="flTimer_8c.html#154b34b0d32a2c77e90dc904a634fd59">timerGetDeltaTime</a>(<a class="code" href="flNotify_8c.html#4de40991164a87ce80583f843c5ff083">ntfyTimeTimer</a>);
<a name="l00098"></a>00098           <span class="keywordflow">if</span>(<a class="code" href="flNotify_8c.html#6ba80c402400303f97ee31f55512a7fd">ntfyTimeTime</a> &gt; 0.0f) {
<a name="l00099"></a>00099                <a class="code" href="flNotify_8c.html#6ba80c402400303f97ee31f55512a7fd">ntfyTimeTime</a> -= tempTick;
<a name="l00100"></a>00100                <span class="keywordflow">if</span>(<a class="code" href="flNotify_8c.html#6ba80c402400303f97ee31f55512a7fd">ntfyTimeTime</a> &lt; 0.0f)
<a name="l00101"></a>00101                     <a class="code" href="flNotify_8c.html#6ba80c402400303f97ee31f55512a7fd">ntfyTimeTime</a> = 0.0f;
<a name="l00102"></a>00102           }
<a name="l00103"></a>00103 <span class="preprocessor">          #if FL_NOTIFY_TIME</span>
<a name="l00104"></a>00104 <span class="preprocessor"></span>          <a class="code" href="flNotify_8c.html#a63e049aa2dbb4902b6f0d3363e5a8b7">ntfyCheckTime</a>();
<a name="l00105"></a>00105 <span class="preprocessor">          #endif</span>
<a name="l00106"></a>00106 <span class="preprocessor"></span>          
<a name="l00107"></a>00107 <span class="preprocessor">          #if FL_NOTIFY_TRAYSIZE</span>
<a name="l00108"></a>00108 <span class="preprocessor"></span>          <a class="code" href="flNotify_8c.html#62e1c6f0194cee8e8505f76ef8b1e168">ntfyTrayTick</a>();
<a name="l00109"></a>00109 <span class="preprocessor">          #endif</span>
<a name="l00110"></a>00110 <span class="preprocessor"></span>          
<a name="l00111"></a>00111           <a class="code" href="flNotify_8c.html#8a001c468ca918da05d444cbbc82c21b">ntfyTickCount</a> = 0;
<a name="l00112"></a>00112      }
<a name="l00113"></a>00113 <span class="preprocessor">     #if FL_NOTIFY_VOLUME</span>
<a name="l00114"></a>00114 <span class="preprocessor"></span>     <span class="keywordflow">if</span>(ntfyVolTime &gt; 0.0f)
<a name="l00115"></a>00115           ntfyShowVolume();
<a name="l00116"></a>00116 <span class="preprocessor">     #endif</span>
<a name="l00117"></a>00117 <span class="preprocessor"></span><span class="preprocessor">     #if FL_NOTIFY_BATTERY</span>
<a name="l00118"></a>00118 <span class="preprocessor"></span>     <span class="keywordflow">if</span>(<a class="code" href="flNotify_8c.html#03a203ba3c5858fc12ae1f76f74f944e">ntfyBattTime</a> &gt; 0.0f)
<a name="l00119"></a>00119           <a class="code" href="flNotify_8c.html#4dc9a519cd973d1b8f9672d709f7471e">ntfyShowBattery</a>();
<a name="l00120"></a>00120 <span class="preprocessor">     #endif</span>
<a name="l00121"></a>00121 <span class="preprocessor"></span><span class="preprocessor">     #if FL_NOTIFY_TIME</span>
<a name="l00122"></a>00122 <span class="preprocessor"></span>     <span class="keywordflow">if</span>(<a class="code" href="flNotify_8c.html#6ba80c402400303f97ee31f55512a7fd">ntfyTimeTime</a> &gt; 0.0f)
<a name="l00123"></a>00123           <a class="code" href="flNotify_8c.html#b820d2dca060b648b4c51bdc592c2d95">ntfyShowTime</a>();
<a name="l00124"></a>00124 <span class="preprocessor">     #endif</span>
<a name="l00125"></a>00125 <span class="preprocessor"></span>     
<a name="l00126"></a>00126 <span class="preprocessor">     #if FL_NOTIFY_TRAYSIZE</span>
<a name="l00127"></a>00127 <span class="preprocessor"></span>     <a class="code" href="flNotify_8c.html#335d3a9276709c7fc08635f7555b1194">ntfyTrayShow</a>();
<a name="l00128"></a>00128 <span class="preprocessor">     #endif</span>
<a name="l00129"></a>00129 <span class="preprocessor"></span>}
<a name="l00130"></a>00130 
<a name="l00131"></a><a class="code" href="flNotify_8h.html#7a3d59ce781288cef7644451105d6715">00131</a> <span class="keywordtype">void</span> <a class="code" href="flNotify_8c.html#7a3d59ce781288cef7644451105d6715">ntfyShowAll</a>(<span class="keywordtype">float</span> inTime) {
<a name="l00132"></a>00132 <span class="preprocessor">     #if FL_NOTIFY_VOLUME</span>
<a name="l00133"></a>00133 <span class="preprocessor"></span>     ntfyShowVolume();
<a name="l00134"></a>00134      ntfyVolTime = inTime;
<a name="l00135"></a>00135 <span class="preprocessor">     #endif</span>
<a name="l00136"></a>00136 <span class="preprocessor"></span><span class="preprocessor">     #if FL_NOTIFY_BATTERY</span>
<a name="l00137"></a>00137 <span class="preprocessor"></span>     <a class="code" href="flNotify_8c.html#4dc9a519cd973d1b8f9672d709f7471e">ntfyShowBattery</a>();
<a name="l00138"></a>00138      <a class="code" href="flNotify_8c.html#03a203ba3c5858fc12ae1f76f74f944e">ntfyBattTime</a> = inTime;
<a name="l00139"></a>00139 <span class="preprocessor">     #endif</span>
<a name="l00140"></a>00140 <span class="preprocessor"></span><span class="preprocessor">     #if FL_NOTIFY_TIME</span>
<a name="l00141"></a>00141 <span class="preprocessor"></span>     <a class="code" href="flNotify_8c.html#b820d2dca060b648b4c51bdc592c2d95">ntfyShowTime</a>();
<a name="l00142"></a>00142      <a class="code" href="flNotify_8c.html#6ba80c402400303f97ee31f55512a7fd">ntfyTimeTime</a> = inTime;
<a name="l00143"></a>00143 <span class="preprocessor">     #endif</span>
<a name="l00144"></a>00144 <span class="preprocessor"></span><span class="preprocessor">     #if FL_NOTIFY_TIME</span>
<a name="l00145"></a>00145 <span class="preprocessor"></span>     <a class="code" href="flNotify_8c.html#d4ad320596b2f405aae8dffff7ee9f47">ntfyShowDate</a>();
<a name="l00146"></a>00146 <span class="preprocessor">     #endif</span>
<a name="l00147"></a>00147 <span class="preprocessor"></span>}
<a name="l00148"></a>00148 
<a name="l00149"></a>00149 <span class="preprocessor">#if FL_KERNELMODE</span>
<a name="l00150"></a>00150 <span class="preprocessor"></span><span class="keywordtype">void</span> ntfyCheckVolume() {
<a name="l00151"></a>00151      <span class="keywordflow">if</span>(!<a class="code" href="flNotify_8c.html#6d3ba2e4609062a98bc1ecdd3dd82afd">ntfyInitialized</a>)
<a name="l00152"></a>00152           <span class="keywordflow">return</span>;
<a name="l00153"></a>00153           
<a name="l00154"></a>00154      <span class="keywordtype">int</span> tempVol = sceImposeGetParam(PSP_IMPOSE_MAIN_VOLUME);
<a name="l00155"></a>00155      <span class="keywordtype">int</span> tempVolMute = sceImposeGetParam(PSP_IMPOSE_MUTE);
<a name="l00156"></a>00156 
<a name="l00157"></a>00157      <span class="keywordflow">if</span>((tempVol &gt;= 0) &amp;&amp; (ntfyVolLast != tempVol)) {
<a name="l00158"></a>00158           ntfyVolLast = tempVol;
<a name="l00159"></a>00159           <span class="keywordflow">if</span>((ntfyVolLast &gt;= 0) &amp;&amp; (ntfyVolTime &lt; <a class="code" href="flConfig_8h.html#8fbde230321202ac0be129399da674e2">FL_NOTIFY_DURATION</a>))
<a name="l00160"></a>00160                ntfyVolTime = <a class="code" href="flConfig_8h.html#8fbde230321202ac0be129399da674e2">FL_NOTIFY_DURATION</a>;
<a name="l00161"></a>00161      }
<a name="l00162"></a>00162      <span class="keywordflow">if</span>((tempVolMute &gt;= 0) &amp;&amp; (ntfyVolMuteLast != tempVolMute)) {
<a name="l00163"></a>00163           <span class="keywordflow">if</span>((ntfyVolMuteLast &gt;= 0) &amp;&amp; (ntfyVolTime &lt; <a class="code" href="flConfig_8h.html#8fbde230321202ac0be129399da674e2">FL_NOTIFY_DURATION</a>))
<a name="l00164"></a>00164                ntfyVolTime = <a class="code" href="flConfig_8h.html#8fbde230321202ac0be129399da674e2">FL_NOTIFY_DURATION</a>;
<a name="l00165"></a>00165           ntfyVolMuteLast = tempVolMute;
<a name="l00166"></a>00166      }
<a name="l00167"></a>00167 }
<a name="l00168"></a>00168 <span class="preprocessor">#endif</span>
<a name="l00169"></a>00169 <span class="preprocessor"></span>
<a name="l00170"></a><a class="code" href="flNotify_8h.html#600e4ac54e9fb4dee440b5264b9e1df3">00170</a> <span class="keywordtype">void</span> <a class="code" href="flNotify_8c.html#600e4ac54e9fb4dee440b5264b9e1df3">ntfyCheckBattery</a>() {
<a name="l00171"></a>00171      <span class="keywordflow">if</span>(!<a class="code" href="flNotify_8c.html#6d3ba2e4609062a98bc1ecdd3dd82afd">ntfyInitialized</a>)
<a name="l00172"></a>00172           <span class="keywordflow">return</span>;
<a name="l00173"></a>00173           
<a name="l00174"></a>00174      <span class="keywordtype">int</span> tempBattLow = scePowerIsLowBattery();
<a name="l00175"></a>00175      <span class="keywordtype">int</span> tempCharge = scePowerIsPowerOnline();
<a name="l00176"></a>00176      <span class="keywordtype">int</span> tempPercent = scePowerGetBatteryLifePercent();
<a name="l00177"></a>00177      
<a name="l00178"></a>00178      <span class="keywordflow">if</span>(tempBattLow &gt; 0) {
<a name="l00179"></a>00179           <span class="keywordflow">if</span>(<a class="code" href="flNotify_8c.html#03a203ba3c5858fc12ae1f76f74f944e">ntfyBattTime</a> &lt; <a class="code" href="flConfig_8h.html#8fbde230321202ac0be129399da674e2">FL_NOTIFY_DURATION</a>)
<a name="l00180"></a>00180                <a class="code" href="flNotify_8c.html#03a203ba3c5858fc12ae1f76f74f944e">ntfyBattTime</a> = <a class="code" href="flConfig_8h.html#8fbde230321202ac0be129399da674e2">FL_NOTIFY_DURATION</a>;
<a name="l00181"></a>00181 <span class="preprocessor">          #if FL_DEBUG_STATUS</span>
<a name="l00182"></a>00182 <span class="preprocessor"></span>          <span class="keywordflow">if</span>(<a class="code" href="flNotify_8c.html#7e58df18b4f2d12477fc796b4a81a863">ntfyBattLowLast</a> != 0)
<a name="l00183"></a>00183                <a class="code" href="flDebug_8h.html#cc3801a5f77287b2c168ec14ab70927d">debugStatusLog</a>(<span class="stringliteral">"Battery low."</span>);
<a name="l00184"></a>00184 <span class="preprocessor">          #endif</span>
<a name="l00185"></a>00185 <span class="preprocessor"></span>          <a class="code" href="flNotify_8c.html#7e58df18b4f2d12477fc796b4a81a863">ntfyBattLowLast</a> = tempBattLow;
<a name="l00186"></a>00186      }
<a name="l00187"></a>00187      
<a name="l00188"></a>00188      <span class="keywordflow">if</span>((tempCharge &gt;= 0) &amp;&amp; (tempCharge != <a class="code" href="flNotify_8c.html#b0c871dc5759f171078a7e8e7786f2a3">ntfyBattChrgLast</a>)) {
<a name="l00189"></a>00189           <span class="keywordflow">if</span>((<a class="code" href="flNotify_8c.html#b0c871dc5759f171078a7e8e7786f2a3">ntfyBattChrgLast</a> &gt;= 0) &amp;&amp; (<a class="code" href="flNotify_8c.html#03a203ba3c5858fc12ae1f76f74f944e">ntfyBattTime</a> &lt; <a class="code" href="flConfig_8h.html#8fbde230321202ac0be129399da674e2">FL_NOTIFY_DURATION</a>))
<a name="l00190"></a>00190                <a class="code" href="flNotify_8c.html#03a203ba3c5858fc12ae1f76f74f944e">ntfyBattTime</a> = <a class="code" href="flConfig_8h.html#8fbde230321202ac0be129399da674e2">FL_NOTIFY_DURATION</a>;
<a name="l00191"></a>00191           <a class="code" href="flNotify_8c.html#b0c871dc5759f171078a7e8e7786f2a3">ntfyBattChrgLast</a> = tempCharge;
<a name="l00192"></a>00192 <span class="preprocessor">          #if FL_DEBUG_STATUS</span>
<a name="l00193"></a>00193 <span class="preprocessor"></span>          <span class="keywordflow">if</span>(tempCharge &gt; 0)
<a name="l00194"></a>00194               <a class="code" href="flDebug_8h.html#cc3801a5f77287b2c168ec14ab70927d">debugStatusLog</a>(<span class="stringliteral">"AC plugged in."</span>);
<a name="l00195"></a>00195           <span class="keywordflow">else</span>
<a name="l00196"></a>00196               <a class="code" href="flDebug_8h.html#cc3801a5f77287b2c168ec14ab70927d">debugStatusLog</a>(<span class="stringliteral">"AC removed."</span>);          
<a name="l00197"></a>00197 <span class="preprocessor">          #endif</span>
<a name="l00198"></a>00198 <span class="preprocessor"></span>     }
<a name="l00199"></a>00199      
<a name="l00200"></a>00200      <span class="keywordflow">if</span>((<a class="code" href="flNotify_8c.html#532036aa016bdf7f32aabcd3e93c82e0">ntfyBattPercentLast</a> &gt;= 0) &amp;&amp; (<a class="code" href="flNotify_8c.html#03a203ba3c5858fc12ae1f76f74f944e">ntfyBattTime</a> &lt; <a class="code" href="flConfig_8h.html#8fbde230321202ac0be129399da674e2">FL_NOTIFY_DURATION</a>)) {
<a name="l00201"></a>00201           <span class="keywordflow">if</span>((tempPercent &lt; 75) &amp;&amp; (<a class="code" href="flNotify_8c.html#532036aa016bdf7f32aabcd3e93c82e0">ntfyBattPercentLast</a> &gt; 75))
<a name="l00202"></a>00202                <a class="code" href="flNotify_8c.html#03a203ba3c5858fc12ae1f76f74f944e">ntfyBattTime</a> = <a class="code" href="flConfig_8h.html#8fbde230321202ac0be129399da674e2">FL_NOTIFY_DURATION</a>;
<a name="l00203"></a>00203           <span class="keywordflow">else</span> <span class="keywordflow">if</span>((tempPercent &gt; 75) &amp;&amp; (<a class="code" href="flNotify_8c.html#532036aa016bdf7f32aabcd3e93c82e0">ntfyBattPercentLast</a> &lt; 75))
<a name="l00204"></a>00204                <a class="code" href="flNotify_8c.html#03a203ba3c5858fc12ae1f76f74f944e">ntfyBattTime</a> = <a class="code" href="flConfig_8h.html#8fbde230321202ac0be129399da674e2">FL_NOTIFY_DURATION</a>;
<a name="l00205"></a>00205           <span class="keywordflow">else</span> <span class="keywordflow">if</span>((tempPercent &lt; 50) &amp;&amp; (<a class="code" href="flNotify_8c.html#532036aa016bdf7f32aabcd3e93c82e0">ntfyBattPercentLast</a> &gt; 50))
<a name="l00206"></a>00206                <a class="code" href="flNotify_8c.html#03a203ba3c5858fc12ae1f76f74f944e">ntfyBattTime</a> = <a class="code" href="flConfig_8h.html#8fbde230321202ac0be129399da674e2">FL_NOTIFY_DURATION</a>;
<a name="l00207"></a>00207           <span class="keywordflow">else</span> <span class="keywordflow">if</span>((tempPercent &gt; 50) &amp;&amp; (<a class="code" href="flNotify_8c.html#532036aa016bdf7f32aabcd3e93c82e0">ntfyBattPercentLast</a> &lt; 50))
<a name="l00208"></a>00208                <a class="code" href="flNotify_8c.html#03a203ba3c5858fc12ae1f76f74f944e">ntfyBattTime</a> = <a class="code" href="flConfig_8h.html#8fbde230321202ac0be129399da674e2">FL_NOTIFY_DURATION</a>;
<a name="l00209"></a>00209           <span class="keywordflow">else</span> <span class="keywordflow">if</span>((tempPercent &lt; 25) &amp;&amp; (<a class="code" href="flNotify_8c.html#532036aa016bdf7f32aabcd3e93c82e0">ntfyBattPercentLast</a> &gt; 25))
<a name="l00210"></a>00210                <a class="code" href="flNotify_8c.html#03a203ba3c5858fc12ae1f76f74f944e">ntfyBattTime</a> = <a class="code" href="flConfig_8h.html#8fbde230321202ac0be129399da674e2">FL_NOTIFY_DURATION</a>;
<a name="l00211"></a>00211           <span class="keywordflow">else</span> <span class="keywordflow">if</span>((tempPercent &gt; 25) &amp;&amp; (<a class="code" href="flNotify_8c.html#532036aa016bdf7f32aabcd3e93c82e0">ntfyBattPercentLast</a> &lt; 25))
<a name="l00212"></a>00212                <a class="code" href="flNotify_8c.html#03a203ba3c5858fc12ae1f76f74f944e">ntfyBattTime</a> = <a class="code" href="flConfig_8h.html#8fbde230321202ac0be129399da674e2">FL_NOTIFY_DURATION</a>;
<a name="l00213"></a>00213      }
<a name="l00214"></a>00214      <a class="code" href="flNotify_8c.html#532036aa016bdf7f32aabcd3e93c82e0">ntfyBattPercentLast</a> = tempPercent;
<a name="l00215"></a>00215 }
<a name="l00216"></a>00216 
<a name="l00217"></a><a class="code" href="flNotify_8h.html#a63e049aa2dbb4902b6f0d3363e5a8b7">00217</a> <span class="keywordtype">void</span> <a class="code" href="flNotify_8c.html#a63e049aa2dbb4902b6f0d3363e5a8b7">ntfyCheckTime</a>() {
<a name="l00218"></a>00218      <span class="keywordflow">if</span>(!<a class="code" href="flNotify_8c.html#6d3ba2e4609062a98bc1ecdd3dd82afd">ntfyInitialized</a>)
<a name="l00219"></a>00219           <span class="keywordflow">return</span>;
<a name="l00220"></a>00220           
<a name="l00221"></a>00221      pspTime tempTime;
<a name="l00222"></a>00222      sceRtcGetCurrentClockLocalTime(&amp;tempTime);
<a name="l00223"></a>00223     
<a name="l00224"></a>00224      <span class="keywordflow">if</span>((tempTime.hour != <a class="code" href="flNotify_8c.html#bcf0c3d5dc92f30cc21b7de43bf73d57">ntfyTimeLast</a>.hour) &amp;&amp; (<a class="code" href="flNotify_8c.html#6ba80c402400303f97ee31f55512a7fd">ntfyTimeTime</a> &lt; <a class="code" href="flConfig_8h.html#8fbde230321202ac0be129399da674e2">FL_NOTIFY_DURATION</a>))
<a name="l00225"></a>00225           <a class="code" href="flNotify_8c.html#6ba80c402400303f97ee31f55512a7fd">ntfyTimeTime</a> = <a class="code" href="flConfig_8h.html#8fbde230321202ac0be129399da674e2">FL_NOTIFY_DURATION</a>;
<a name="l00226"></a>00226      <span class="keywordflow">else</span> <span class="keywordflow">if</span>((<a class="code" href="flNotify_8c.html#bcf0c3d5dc92f30cc21b7de43bf73d57">ntfyTimeLast</a>.minutes != tempTime.minutes) &amp;&amp; (<a class="code" href="flNotify_8c.html#6ba80c402400303f97ee31f55512a7fd">ntfyTimeTime</a> &lt; <a class="code" href="flConfig_8h.html#8fbde230321202ac0be129399da674e2">FL_NOTIFY_DURATION</a>)) {
<a name="l00227"></a>00227           <span class="keywordflow">if</span>((tempTime.minutes == 15) || (tempTime.minutes == 30) || (tempTime.minutes == 45))
<a name="l00228"></a>00228                <a class="code" href="flNotify_8c.html#6ba80c402400303f97ee31f55512a7fd">ntfyTimeTime</a> = <a class="code" href="flConfig_8h.html#8fbde230321202ac0be129399da674e2">FL_NOTIFY_DURATION</a>;
<a name="l00229"></a>00229      }
<a name="l00230"></a>00230 
<a name="l00231"></a>00231      <a class="code" href="flNotify_8c.html#bcf0c3d5dc92f30cc21b7de43bf73d57">ntfyTimeLast</a> = tempTime;
<a name="l00232"></a>00232 }
<a name="l00233"></a>00233 
<a name="l00234"></a>00234 <span class="preprocessor">#if FL_KERNELMODE</span>
<a name="l00235"></a>00235 <span class="preprocessor"></span><span class="keywordtype">void</span> ntfyShowVolume() {
<a name="l00236"></a>00236      <span class="keywordflow">if</span>(!<a class="code" href="flNotify_8c.html#2cdc8553a78172b2afcd7d87828d90dd">ntfyVisible</a>)
<a name="l00237"></a>00237           <span class="keywordflow">return</span>;
<a name="l00238"></a>00238           
<a name="l00239"></a>00239      <span class="keywordtype">int</span> tempVol = sceImposeGetParam(PSP_IMPOSE_MAIN_VOLUME);
<a name="l00240"></a>00240      <span class="keywordtype">int</span> tempVolMute = sceImposeGetParam(PSP_IMPOSE_MUTE);
<a name="l00241"></a>00241      <span class="keywordflow">if</span>(tempVol &lt; 0) {
<a name="l00242"></a>00242 <span class="preprocessor">          #if FL_DEBUG_WARNING != 0</span>
<a name="l00243"></a>00243 <span class="preprocessor"></span>          <a class="code" href="flDebug_8h.html#a122223db39f9f6ab0773adbf5de1a97">debugWarning</a>(<span class="stringliteral">"Error retrieving volume percentage."</span>);
<a name="l00244"></a>00244 <span class="preprocessor">          #endif</span>
<a name="l00245"></a>00245 <span class="preprocessor"></span>          <span class="keywordflow">return</span>;
<a name="l00246"></a>00246      }
<a name="l00247"></a>00247      <a class="code" href="flGraphics2d_8c.html#ea93dd1ab20e3d997f5a663690ed5386">graphics2dDrawRectFilled</a>(24, (<a class="code" href="flDefines_8h.html#6974d08a74da681b3957b2fead2608b8">SCREEN_HEIGHT</a> - 12), (<a class="code" href="flDefines_8h.html#2cd109632a6dcccaa80b43561b1ab700">SCREEN_WIDTH</a> - 28), 8, 0x7F7F7F7F);
<a name="l00248"></a>00248      <span class="keywordflow">if</span>(tempVol &gt; 0) {
<a name="l00249"></a>00249           tempVol *= (<a class="code" href="flDefines_8h.html#2cd109632a6dcccaa80b43561b1ab700">SCREEN_WIDTH</a> - 28);
<a name="l00250"></a>00250           tempVol /= 30;
<a name="l00251"></a>00251           <a class="code" href="flGraphics2d_8c.html#ea93dd1ab20e3d997f5a663690ed5386">graphics2dDrawRectFilled</a>(24, (<a class="code" href="flDefines_8h.html#6974d08a74da681b3957b2fead2608b8">SCREEN_HEIGHT</a> - 12), tempVol, 8, 0xFFFFFFFF);
<a name="l00252"></a>00252      }
<a name="l00253"></a>00253      
<a name="l00254"></a>00254      <span class="keywordflow">if</span>(tempVolMute &gt; 0) {
<a name="l00255"></a>00255           <a class="code" href="flGraphics2d_8c.html#91470709f2985e747c865ec42a1c5db6">graphics2dDrawLine</a>(8, (<a class="code" href="flDefines_8h.html#6974d08a74da681b3957b2fead2608b8">SCREEN_HEIGHT</a> - 12), 16, (<a class="code" href="flDefines_8h.html#6974d08a74da681b3957b2fead2608b8">SCREEN_HEIGHT</a> - 4), 0xFF0000FF);
<a name="l00256"></a>00256           <a class="code" href="flGraphics2d_8c.html#91470709f2985e747c865ec42a1c5db6">graphics2dDrawLine</a>(16, (<a class="code" href="flDefines_8h.html#6974d08a74da681b3957b2fead2608b8">SCREEN_HEIGHT</a> - 12), 8, (<a class="code" href="flDefines_8h.html#6974d08a74da681b3957b2fead2608b8">SCREEN_HEIGHT</a> - 4), 0xFF0000FF);
<a name="l00257"></a>00257      }
<a name="l00258"></a>00258 }
<a name="l00259"></a>00259 <span class="preprocessor">#endif</span>
<a name="l00260"></a>00260 <span class="preprocessor"></span>
<a name="l00261"></a><a class="code" href="flNotify_8h.html#4dc9a519cd973d1b8f9672d709f7471e">00261</a> <span class="keywordtype">void</span> <a class="code" href="flNotify_8c.html#4dc9a519cd973d1b8f9672d709f7471e">ntfyShowBattery</a>() {
<a name="l00262"></a>00262      <span class="keywordflow">if</span>(!<a class="code" href="flNotify_8c.html#2cdc8553a78172b2afcd7d87828d90dd">ntfyVisible</a>)
<a name="l00263"></a>00263           <span class="keywordflow">return</span>;
<a name="l00264"></a>00264 
<a name="l00265"></a>00265      <span class="keywordtype">int</span> tempBatt = scePowerGetBatteryLifePercent();
<a name="l00266"></a>00266      <span class="keywordtype">int</span> tempLowBatt = scePowerIsLowBattery();
<a name="l00267"></a>00267      <span class="keywordtype">int</span> tempAC = scePowerIsPowerOnline();
<a name="l00268"></a>00268      <span class="keywordflow">if</span>(tempBatt &lt; 0) {
<a name="l00269"></a>00269 <span class="preprocessor">          #if FL_DEBUG_WARNING != 0</span>
<a name="l00270"></a>00270 <span class="preprocessor"></span>          <a class="code" href="flDebug_8h.html#a122223db39f9f6ab0773adbf5de1a97">debugWarning</a>(<span class="stringliteral">"Error retrieving battery percentage."</span>);
<a name="l00271"></a>00271 <span class="preprocessor">          #endif</span>
<a name="l00272"></a>00272 <span class="preprocessor"></span>          <span class="keywordflow">return</span>;
<a name="l00273"></a>00273      }
<a name="l00274"></a>00274      <span class="keywordflow">if</span>(tempAC &lt; 0)
<a name="l00275"></a>00275           tempAC = 0;
<a name="l00276"></a>00276      
<a name="l00277"></a>00277      u32 tempWidth = 32;
<a name="l00278"></a>00278      u32 tempHeight = 12;
<a name="l00279"></a>00279      u32 tempX = (<a class="code" href="flDefines_8h.html#2cd109632a6dcccaa80b43561b1ab700">SCREEN_WIDTH</a> - (tempWidth + 4));
<a name="l00280"></a>00280      u32 tempY = 4;
<a name="l00281"></a>00281      
<a name="l00282"></a>00282      <a class="code" href="flGraphics2d_8c.html#ea93dd1ab20e3d997f5a663690ed5386">graphics2dDrawRectFilled</a>(tempX, tempY, tempWidth, tempHeight, 0x7F7F7F7F);
<a name="l00283"></a>00283      <a class="code" href="flGraphics2d_8c.html#ea93dd1ab20e3d997f5a663690ed5386">graphics2dDrawRectFilled</a>((tempX + 1), tempY, ((tempBatt * (tempWidth - 2)) / 100), tempHeight, (tempAC ? 0xFF00DFFF : (tempLowBatt &gt; 0 ? 0x7F0000FF : 0x7F00FF00)));
<a name="l00284"></a>00284      <a class="code" href="flGraphics2d_8c.html#32b7a6e54f6fda2ea7210fca6e0c3e04">graphics2dDrawRect</a>(tempX, tempY, tempWidth, tempHeight, 0xFFFFFFFF);
<a name="l00285"></a>00285      <a class="code" href="flGraphics2d_8c.html#91470709f2985e747c865ec42a1c5db6">graphics2dDrawLine</a>((tempX + tempWidth), (tempY + 3), (tempX + tempWidth), ((tempY + tempHeight) - 3), 0xFFFFFFFF);
<a name="l00286"></a>00286      
<a name="l00287"></a>00287 <span class="preprocessor">     #if FL_FONT</span>
<a name="l00288"></a>00288 <span class="preprocessor"></span>     <span class="keywordtype">char</span> tempString[16];
<a name="l00289"></a>00289      <span class="keywordflow">if</span>(tempAC)
<a name="l00290"></a>00290           sprintf(tempString, <span class="stringliteral">"AC"</span>);
<a name="l00291"></a>00291      <span class="keywordflow">else</span>
<a name="l00292"></a>00292           sprintf(tempString, <span class="stringliteral">"%i"</span>, tempBatt);
<a name="l00293"></a>00293      
<a name="l00294"></a>00294      u32 tempFontWidth = <a class="code" href="flFont_8c.html#d75ea5a21fc0145cf0509698bbd57ed4">fontStringWidth</a>(<a class="code" href="flFont_8c.html#b1e771ff1965e62f65eab80b2ca4475f">fontDefault</a>, tempString);
<a name="l00295"></a>00295      u32 tempFontHeight = <a class="code" href="flFont_8c.html#52a6b73a87f357f4063ff8ebc8e5f974">fontHeight</a>(<a class="code" href="flFont_8c.html#b1e771ff1965e62f65eab80b2ca4475f">fontDefault</a>);
<a name="l00296"></a>00296      <a class="code" href="flFont_8c.html#0f17a042bd1e5d440c89e3da55e20898">fontDraw2dString</a>((tempX + ((tempWidth - tempFontWidth) &gt;&gt; 1)), (tempY + ((tempHeight - tempFontHeight) &gt;&gt; 1)), <a class="code" href="flFont_8c.html#b1e771ff1965e62f65eab80b2ca4475f">fontDefault</a>, tempString);
<a name="l00297"></a>00297 <span class="preprocessor">     #endif</span>
<a name="l00298"></a>00298 <span class="preprocessor"></span>}
<a name="l00299"></a>00299 
<a name="l00300"></a><a class="code" href="flNotify_8h.html#b820d2dca060b648b4c51bdc592c2d95">00300</a> <span class="keywordtype">void</span> <a class="code" href="flNotify_8c.html#b820d2dca060b648b4c51bdc592c2d95">ntfyShowTime</a>() {
<a name="l00301"></a>00301      <span class="keywordflow">if</span>(!<a class="code" href="flNotify_8c.html#2cdc8553a78172b2afcd7d87828d90dd">ntfyVisible</a>)
<a name="l00302"></a>00302           <span class="keywordflow">return</span>;
<a name="l00303"></a>00303           
<a name="l00304"></a>00304      pspTime tempTime;
<a name="l00305"></a>00305      sceRtcGetCurrentClockLocalTime(&amp;tempTime);
<a name="l00306"></a>00306      
<a name="l00307"></a>00307      u32 tempWidth = 56;
<a name="l00308"></a>00308      u32 tempHeight = 12;
<a name="l00309"></a>00309      u32 tempX = (<a class="code" href="flDefines_8h.html#2cd109632a6dcccaa80b43561b1ab700">SCREEN_WIDTH</a> - (tempWidth + 40));
<a name="l00310"></a>00310      u32 tempY = 4;
<a name="l00311"></a>00311      
<a name="l00312"></a>00312      <a class="code" href="flGraphics2d_8c.html#ea93dd1ab20e3d997f5a663690ed5386">graphics2dDrawRectFilled</a>((tempX + (tempHeight &gt;&gt; 1)), tempY, (tempWidth - (tempHeight &gt;&gt; 1)), tempHeight, 0xFF7F7F7F);
<a name="l00313"></a>00313      <a class="code" href="flGraphics2d_8c.html#29b5a0adce9404448962b19aac6b2bc3">graphics2dDrawEllipseFilled</a>(tempX, tempY, tempHeight, tempHeight, 0xFF7F7F7F);
<a name="l00314"></a>00314      <a class="code" href="flGraphics2d_8c.html#1801c42fc90be61982c4fb7a77f0c44a">graphics2dDrawEllipse</a>(tempX, tempY, tempHeight, tempHeight, 0xFFFFFFFF);
<a name="l00315"></a>00315      <a class="code" href="flGraphics2d_8c.html#91470709f2985e747c865ec42a1c5db6">graphics2dDrawLine</a>((tempX + (tempHeight &gt;&gt; 1)), (tempY + (tempHeight &gt;&gt; 1)), (tempX + (tempHeight &gt;&gt; 1)), tempY, 0xFFFFFFFF);
<a name="l00316"></a>00316      <a class="code" href="flGraphics2d_8c.html#91470709f2985e747c865ec42a1c5db6">graphics2dDrawLine</a>((tempX + (tempHeight &gt;&gt; 1)), (tempY + (tempHeight &gt;&gt; 1)), (tempX + tempHeight), (tempY + (tempHeight &gt;&gt; 1)), 0xFFFFFFFF);
<a name="l00317"></a>00317           
<a name="l00318"></a>00318 <span class="preprocessor">     #if FL_FONT</span>
<a name="l00319"></a>00319 <span class="preprocessor"></span>     <span class="keywordtype">char</span> tempString[16];
<a name="l00320"></a>00320      sprintf(tempString, <span class="stringliteral">"%02u:%02u"</span>, (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span>)tempTime.hour, (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span>)tempTime.minutes);
<a name="l00321"></a>00321     
<a name="l00322"></a>00322      u32 tempFontHeight = <a class="code" href="flFont_8c.html#52a6b73a87f357f4063ff8ebc8e5f974">fontHeight</a>(<a class="code" href="flFont_8c.html#b1e771ff1965e62f65eab80b2ca4475f">fontDefault</a>);
<a name="l00323"></a>00323      <a class="code" href="flFont_8c.html#0f17a042bd1e5d440c89e3da55e20898">fontDraw2dString</a>((tempX + tempHeight + 4), (tempY + ((tempHeight - tempFontHeight) &gt;&gt; 1)), <a class="code" href="flFont_8c.html#b1e771ff1965e62f65eab80b2ca4475f">fontDefault</a>, tempString);
<a name="l00324"></a>00324 <span class="preprocessor">     #endif</span>
<a name="l00325"></a>00325 <span class="preprocessor"></span>}
<a name="l00326"></a>00326 
<a name="l00327"></a><a class="code" href="flNotify_8h.html#d4ad320596b2f405aae8dffff7ee9f47">00327</a> <span class="keywordtype">void</span> <a class="code" href="flNotify_8c.html#d4ad320596b2f405aae8dffff7ee9f47">ntfyShowDate</a>() {
<a name="l00328"></a>00328 
<a name="l00329"></a>00329 }
<a name="l00330"></a>00330 
<a name="l00331"></a>00331 <span class="preprocessor">#if FL_NOTIFY_TRAYSIZE</span>
<a name="l00332"></a><a class="code" href="flNotify_8h.html#9a5dce75d9d2b20e3ce17d8f4f80e278">00332</a> <span class="preprocessor"></span><span class="keywordtype">void</span> <a class="code" href="flNotify_8c.html#9a5dce75d9d2b20e3ce17d8f4f80e278">ntfyTrayAdd</a>(<span class="keywordtype">char</span>* inMessage, u32 inColor) {
<a name="l00333"></a>00333      <span class="keywordflow">if</span>(!<a class="code" href="flNotify_8c.html#6d3ba2e4609062a98bc1ecdd3dd82afd">ntfyInitialized</a> || !inMessage || !inMessage[0])
<a name="l00334"></a>00334           <span class="keywordflow">return</span>;
<a name="l00335"></a>00335      
<a name="l00336"></a>00336      <span class="keywordtype">int</span> i;
<a name="l00337"></a>00337 <span class="preprocessor">     #if FL_NOTIFY_TRAYSIZE &gt; 1</span>
<a name="l00338"></a>00338 <span class="preprocessor"></span>     <span class="keywordflow">for</span>(i = (<a class="code" href="flConfig_8h.html#ff38ea39f307df3514a6f05cf998ebee">FL_NOTIFY_TRAYSIZE</a> - 2); i &gt;= 0 ; i--)
<a name="l00339"></a>00339           <a class="code" href="flNotify_8c.html#456b0084ad987c08d2efbe9342b1dd27">ntfyTray</a>[i + 1] = <a class="code" href="flNotify_8c.html#456b0084ad987c08d2efbe9342b1dd27">ntfyTray</a>[i];
<a name="l00340"></a>00340 <span class="preprocessor">     #endif</span>
<a name="l00341"></a>00341 <span class="preprocessor"></span>     <span class="keywordflow">for</span>(i = 0; i &lt; 255; i++)
<a name="l00342"></a>00342           <a class="code" href="flNotify_8c.html#456b0084ad987c08d2efbe9342b1dd27">ntfyTray</a>[0].ntiMessage[i] = inMessage[i];
<a name="l00343"></a>00343      <a class="code" href="flNotify_8c.html#456b0084ad987c08d2efbe9342b1dd27">ntfyTray</a>[0].<a class="code" href="structNotifyTrayItem.html#924fceeab924637a846406aa94e5d933">ntiMessage</a>[255] = 0;
<a name="l00344"></a>00344      <a class="code" href="flNotify_8c.html#456b0084ad987c08d2efbe9342b1dd27">ntfyTray</a>[0].<a class="code" href="structNotifyTrayItem.html#075a8e4871586a494b6f53c0a6aad98b">ntiColor</a> = inColor;
<a name="l00345"></a>00345      <a class="code" href="flNotify_8c.html#456b0084ad987c08d2efbe9342b1dd27">ntfyTray</a>[0].<a class="code" href="structNotifyTrayItem.html#384b7f807945d1f53f26b467334c5aea">ntiTime</a> = (<a class="code" href="flConfig_8h.html#8fbde230321202ac0be129399da674e2">FL_NOTIFY_DURATION</a> * 2.0f);
<a name="l00346"></a>00346 }
<a name="l00347"></a>00347 
<a name="l00348"></a><a class="code" href="flNotify_8h.html#62e1c6f0194cee8e8505f76ef8b1e168">00348</a> <span class="keywordtype">void</span> <a class="code" href="flNotify_8c.html#62e1c6f0194cee8e8505f76ef8b1e168">ntfyTrayTick</a>() {
<a name="l00349"></a>00349      <span class="keywordflow">if</span>(!<a class="code" href="flNotify_8c.html#6d3ba2e4609062a98bc1ecdd3dd82afd">ntfyInitialized</a>)
<a name="l00350"></a>00350          <span class="keywordflow">return</span>;
<a name="l00351"></a>00351      
<a name="l00352"></a>00352      <span class="keywordtype">float</span> tempTick = <a class="code" href="flTimer_8c.html#154b34b0d32a2c77e90dc904a634fd59">timerGetDeltaTime</a>(<a class="code" href="flNotify_8c.html#6b3b93c9625bce65cd1d21fb55836de8">ntfyTrayTimer</a>);
<a name="l00353"></a>00353      
<a name="l00354"></a>00354      u32 i;
<a name="l00355"></a>00355      <span class="keywordflow">for</span>(i = 0; i &lt; <a class="code" href="flConfig_8h.html#ff38ea39f307df3514a6f05cf998ebee">FL_NOTIFY_TRAYSIZE</a>; i++) {
<a name="l00356"></a>00356           <span class="keywordflow">if</span>(<a class="code" href="flNotify_8c.html#456b0084ad987c08d2efbe9342b1dd27">ntfyTray</a>[i].ntiTime &gt; 0.0f)
<a name="l00357"></a>00357                <a class="code" href="flNotify_8c.html#456b0084ad987c08d2efbe9342b1dd27">ntfyTray</a>[i].ntiTime -= tempTick;
<a name="l00358"></a>00358           <span class="keywordflow">if</span>(<a class="code" href="flNotify_8c.html#456b0084ad987c08d2efbe9342b1dd27">ntfyTray</a>[i].ntiTime &lt; 0.0f)
<a name="l00359"></a>00359                <a class="code" href="flNotify_8c.html#456b0084ad987c08d2efbe9342b1dd27">ntfyTray</a>[i].ntiTime = 0.0f;
<a name="l00360"></a>00360      }
<a name="l00361"></a>00361 }
<a name="l00362"></a>00362 
<a name="l00363"></a><a class="code" href="flNotify_8h.html#335d3a9276709c7fc08635f7555b1194">00363</a> <span class="keywordtype">void</span> <a class="code" href="flNotify_8c.html#335d3a9276709c7fc08635f7555b1194">ntfyTrayShow</a>() {
<a name="l00364"></a>00364      <span class="keywordflow">if</span>(!<a class="code" href="flNotify_8c.html#2cdc8553a78172b2afcd7d87828d90dd">ntfyVisible</a>)
<a name="l00365"></a>00365           <span class="keywordflow">return</span>;
<a name="l00366"></a>00366      
<a name="l00367"></a>00367      <span class="keywordtype">int</span> tempY = <a class="code" href="flDefines_8h.html#6974d08a74da681b3957b2fead2608b8">SCREEN_HEIGHT</a>;
<a name="l00368"></a>00368      
<a name="l00369"></a>00369      u32 i;
<a name="l00370"></a>00370      <span class="keywordflow">for</span>(i = 0; i &lt; <a class="code" href="flConfig_8h.html#ff38ea39f307df3514a6f05cf998ebee">FL_NOTIFY_TRAYSIZE</a>; i++) {
<a name="l00371"></a>00371           tempY -= <a class="code" href="flFont_8c.html#52a6b73a87f357f4063ff8ebc8e5f974">fontHeight</a>(<a class="code" href="flFont_8c.html#b1e771ff1965e62f65eab80b2ca4475f">fontDefault</a>);
<a name="l00372"></a>00372           
<a name="l00373"></a>00373           <span class="keywordflow">if</span>(<a class="code" href="flNotify_8c.html#456b0084ad987c08d2efbe9342b1dd27">ntfyTray</a>[i].ntiTime &lt;= 0.0f)
<a name="l00374"></a>00374                <span class="keywordflow">continue</span>;
<a name="l00375"></a>00375 
<a name="l00376"></a>00376           <a class="code" href="flGraphics2d_8c.html#ea93dd1ab20e3d997f5a663690ed5386">graphics2dDrawRectFilled</a>(0, tempY, <a class="code" href="flDefines_8h.html#2cd109632a6dcccaa80b43561b1ab700">SCREEN_WIDTH</a>, <a class="code" href="flFont_8c.html#52a6b73a87f357f4063ff8ebc8e5f974">fontHeight</a>(<a class="code" href="flFont_8c.html#b1e771ff1965e62f65eab80b2ca4475f">fontDefault</a>), ((<a class="code" href="flNotify_8c.html#456b0084ad987c08d2efbe9342b1dd27">ntfyTray</a>[i].ntiColor &amp; 0x00FFFFFF) | 0xBF000000));
<a name="l00377"></a>00377           <a class="code" href="flFont_8c.html#0f17a042bd1e5d440c89e3da55e20898">fontDraw2dString</a>(0, tempY, <a class="code" href="flFont_8c.html#b1e771ff1965e62f65eab80b2ca4475f">fontDefault</a>, <a class="code" href="flNotify_8c.html#456b0084ad987c08d2efbe9342b1dd27">ntfyTray</a>[i].ntiMessage);
<a name="l00378"></a>00378      }
<a name="l00379"></a>00379 }
<a name="l00380"></a>00380 <span class="preprocessor">#endif</span>
<a name="l00381"></a>00381 <span class="preprocessor"></span>
<a name="l00382"></a>00382 <span class="preprocessor">#endif</span>
</pre></div><hr size="1"><address style="align: right;"><small>Generated on Wed Sep 5 19:04:01 2007 for funcLib by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.5.1 </small></address>
</body>
</html>
